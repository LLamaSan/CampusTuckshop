<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Tuckshop</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="hamburger-menu" onclick="toggleMenu()">â˜°</div>
            <div class="logo">Campus Tuckshop</div>
           
            <div class="auth-buttons hidden" id="authButtons">
                <button class="btn btn-secondary" onclick="openModal('loginModal')">Sign In</button>
                <button class="btn btn-primary" onclick="openModal('signupModal')">Sign Up</button>
            </div>

            <div class="user-info" id="userInfo">
                <span id="userName"></span>
                <button class="btn btn-secondary" onclick="logout()">Logout</button>
            </div>
        </header>

        <div id="loginRequired" class="alert alert-warning">
            Please sign in to add items to cart and make purchases.
        </div>

        <div class="categories" id="categoriesContainer">
            <!-- Products will be loaded here by JavaScript -->
        </div>
    </div>

    <button class="cart-toggle-btn" id="cartToggleBtn" onclick="toggleCart()">
        <span class="cart-icon">ðŸ›’</span>
        <span class="cart-badge" id="cartBadge">0</span>
    </button>

    <div class="cart" id="cart">
        <div class="cart-header">
            <h3>Cart</h3>
            <span class="cart-count" id="cartCount">0</span>
            <button class="close" onclick="toggleCart()" style="background: none; border: none; color: #a0a0a0; font-size: 20px; cursor: pointer;">&times;</button>
        </div>
        <div id="cartItems"></div>
        <div class="cart-total">
            Total: â‚¹<span id="cartTotal">0</span>
        </div>
        <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="checkout()">
            Place Order
        </button>
    </div>

    <!-- Modals -->
    <div id="orderModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('orderModal')">&times;</span>
            <div class="step-indicator">
                <div class="step active" id="step1"><div class="step-number">1</div><span>Address</span></div>
                <div class="step-separator"></div>
                <div class="step" id="step2"><div class="step-number">2</div><span>Review</span></div>
                <div class="step-separator"></div>
                <div class="step" id="step3"><div class="step-number">3</div><span>Confirm</span></div>
            </div>
            <div id="orderAlert" class="alert"></div>
            <div id="addressSection" style="display: block;">
                <h2 style="color: #4facfe; margin-bottom: 20px;">Delivery Information</h2>
                <div class="modal-step-section">
                    <div class="address-form-scrollable">
                        <form id="addressForm">
                            <div class="form-group"><label for="fullName">Full Name *</label><input type="text" id="fullName" required></div>
                            <div class="form-group" style="position: relative;"><label for="phoneNumber">Phone Number *</label><span class="phone-prefix">+91</span><input type="tel" id="phoneNumber" pattern="[0-9]{10}" maxlength="10" required></div>
                            <div class="form-group"><label for="addressLine1">Address Line 1 *</label><input type="text" id="addressLine1" required></div>
                            <div class="form-group"><label for="addressLine2">Address Line 2</label><input type="text" id="addressLine2"></div>
                            <div style="display: flex; gap: 15px;">
                                <div class="form-group" style="flex: 1;"><label for="city">City *</label><input type="text" id="city" required></div>
                                <div class="form-group" style="flex: 1;"><label for="pincode">PIN Code *</label><input type="text" id="pincode" pattern="[0-9]{6}" maxlength="6" required></div>
                            </div>
                            <div class="form-group"><label for="state">State *</label><input type="text" id="state" required></div>
                        </form>
                    </div>
                    <div class="fixed-bottom-buttons">
                        <div class="button-group">
                            <button class="btn btn-secondary" onclick="closeModal('orderModal')">Cancel</button>
                            <button class="btn btn-primary" onclick="proceedToOrderSummary()">Continue to Review</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="summarySection" style="display: none;">
                <h2 style="color: #4facfe; margin-bottom: 20px;">Review Your Order</h2>
                <div id="deliveryAddress" class="order-dialog"></div>
                <div id="orderSummary" class="order-summary"></div>
                <div class="button-group">
                    <button class="btn btn-secondary" onclick="backToAddress()">Back to Address</button>
                    <button class="btn btn-primary" onclick="confirmOrder()">Confirm Order</button>
                </div>
            </div>
        </div>
    </div>
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2 style="color: #4facfe; margin-bottom: 20px;">Sign In</h2>
            <div id="loginAlert" class="alert"></div>
            <form id="loginForm">
                <div class="form-group"><label for="loginEmail">Email:</label><input type="email" id="loginEmail" required></div>
                <div class="form-group"><label for="loginPassword">Password:</label><input type="password" id="loginPassword" required></div>
                <div style="text-align: right; margin-bottom: 15px;"><a href="#" onclick="openForgotPassword(); return false;" style="color: #4facfe; text-decoration: none; font-size: 0.9em;">Forgot Password?</a></div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Sign In</button>
            </form>
        </div>
    </div>
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('signupModal')">&times;</span>
            <h2 style="color: #4facfe; margin-bottom: 20px;">Sign Up</h2>
            <div id="signupAlert" class="alert"></div>
            <form id="signupForm">
                <div class="form-group"><label for="signupName">Full Name:</label><input type="text" id="signupName" required></div>
                <div class="form-group"><label for="signupEmail">Email:</label><input type="email" id="signupEmail" required></div>
                <div class="form-group"><label for="signupPassword">Password:</label><input type="password" id="signupPassword" required></div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Sign Up</button>
            </form>
        </div>
    </div>
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('forgotPasswordModal')">&times;</span>
            <h2 style="color: #4facfe; margin-bottom: 20px;">Forgot Password?</h2>
            <p style="color: #a0a0a0; margin-bottom: 20px;">Enter your email address and we'll send you a link to reset your password.</p>
            <div id="forgotPasswordAlert" class="alert"></div>
            <form id="forgotPasswordForm">
                <div class="form-group"><label for="forgotPasswordEmail">Email:</label><input type="email" id="forgotPasswordEmail" required></div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reset Link</button>
                <button type="button" class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="backToLogin()">Back to Login</button>
            </form>
        </div>
    </div>

    <script src="/js/main.js"></script>
</body>
</html>
